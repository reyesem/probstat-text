```{r}
#| label: introstat-setup
#| include: false

# Load necessary packages
IntroAnalysis:::ma223_setup()
```


```{r}
#| label: additional-options
#| include: false

# Define default chunk options
knitr::opts_chunk$set(
  fig.path = './images/',
  fig.pos = 'h'
)

# Additional Options
options(knitr.kable.NA = '',
        digits = 4)
```


```{r}
#| label: support-functions
#| include: false

# ---- Latex Notes

# function: underline
# Creates a fill-in-the-blank version of a phrase for students
underline <- function(text, display = params$instructor) {
  if (display) {
    return(paste0('\\ul{', text, '}'))
  } else {
    blank <- stringr::str_replace_all(text, pattern = '\\B|\\b', 'x')
    return(paste0('\\blackout{', blank, '}'))
  }
}


# function: blank
# Creates a fill-in-the-blank version of a paragraph for students, optionally
#   you can include an equation marker.
blank <- function(space = ifelse(equation, '0.25in', '1in'), 
                  display = params$instructor, 
                  equation = FALSE,
                  label = NULL) {
  if (display) {
    invisible('')
  } else {
    blank <- paste0('\\vspace*{', space, '}')
    
    if (equation) {
      eqn <- paste0('$$\\blacklozenge \\hspace{0.75\\linewidth} \\blacklozenge$$')
      if (!is.null(label)) {
        eqn <- paste0(eqn, '{#eq-', label, '}')
      }
      
      blank <- paste0(eqn, '\n\n', blank)
    }
    
    return(blank)
  }
}

# function: visible
# Determines whether a content block is displayed or not programmatically
visible <- function(display = params$instructor) {
  if (display) {
    invisible('')
  } else {
    paste0('.content-hidden')
  }
}



# ---- Summaries

# function: mykable
# description: Create a default version of kbl().
mykable <- function(x, ...) {
  kableExtra::kbl(x, booktabs = TRUE, ...) |>
    kableExtra::kable_styling(
      latex_options = c('striped'),
      position = 'center'
    )
}
```

